var Zanimo=function(){if(!window.requestAnimationFrame)window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();var b=function(a){var d="transitionend",c=null,b={transform:"transform"},e={property:"TransitionProperty",duration:"TransitionDuration",timing:"TransitionTimingFunction"},g=function(a){return(a[0]==="-"?a.substr(1,attr.length-
1):a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})};"WebkitTransition"in a.body.style&&(d="webkitTransitionEnd",c="webkit");for(var h in b)b[h]=c?c+"-"+b[h]:b[h];for(var i in e)e[i]=c?c+e[i]:e[i].charAt(0).toLowerCase()+e[i].slice(1);return{transition:g(c?c+"-transition":"transition"),transitionend:d,properties:e,norm:g,prefixProperty:function(a){return b[a]?b[a]:a}}}(window.document),j=function(a){return Q.fcall(function(){return a})},k=function(a,d,c,f,e){d=b.prefixProperty(d);a.style[b.properties.property]?
(a.style[b.properties.property]=a.style[b.properties.property]+", "+d,a.style[b.properties.duration]=a.style[b.properties.duration]+", "+f+"ms",a.style[b.properties.timing]=a.style[b.properties.timing]+", "+(e||"linear")):(a.style[b.properties.property]=d,a.style[b.properties.duration]=f+"ms",a.style[b.properties.timing]=e||"linear");a.style[b.norm(d)]=c},l=function(a,d,c,f,e){var d=b.prefixProperty(d),c=a.style[b.transition].split(", "),g=c.lastIndexOf(d+" "+f+"ms "+(e||"linear")),d=c.filter(function(a,
b){return b!==g});a.style[b.transition]=d.toString()};j.kDelta=140;j.transition=function(a,d,c,f,e){var g=Q.defer(),h,i=function(){h&&(clearTimeout(h),h=null);l(a,d,c,f,e);a.removeEventListener(b.transitionend,i,!1);g.resolve(a)};if(!a||!a.nodeType||!(a.nodeType>=0))return g.reject(Error("Zanimo transition: no DOM element!")),g.promise;a.addEventListener(b.transitionend,i,!1);window.requestAnimationFrame(function(){k(a,d,c,f,e);h=setTimeout(function(){g.reject(Error("Zanimo transition: "+a.id+" with "+
d+":"+c))},f+j.kDelta)},a);return g.promise};j.transition\u0192=function(a,b,c,f){return function(e){return j.transition(e,a,b,c,f)}};return j}();
