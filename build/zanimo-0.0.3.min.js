var Zanimo=function(){var b=function(a){var b="transitionend",d=null,e={transform:"transform"},f={property:"TransitionProperty",duration:"TransitionDuration",timing:"TransitionTimingFunction"},c=function(a){return(a[0]==="-"?a.substr(1,attr.length-1):a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})};"WebkitTransition"in a.body.style&&(b="webkitTransitionEnd",d="webkit");for(var h in e)e[h]=d?d+"-"+e[h]:e[h];for(var i in f)f[i]=d?d+f[i]:f[i].charAt(0).toLowerCase()+f[i].slice(1);return{transition:c(d?
d+"-transition":"transition"),transitionend:b,properties:f,norm:c,prefixProperty:function(a){return e[a]?e[a]:a}}}(window.document),j=function(a){return Q.fcall(function(){return a})},k=function(a,g,d,e,f){var g=b.prefixProperty(g),d=a.style[b.transition].split(", "),c=d.lastIndexOf(g+" "+e+"ms "+(f||"linear")),g=d.filter(function(a,b){return b!==c});a.style[b.transition]=g.toString()};j.kDelta=140;j.kMin=140;j.transition=function(a,g,d,e,f){var c=Q.defer(),h,i=function(){h&&(clearTimeout(h),h=null);
c.resolve(a);k(a,g,d,e,f);a.removeEventListener(b.transitionend,i,!1)};if(!a||!a.nodeType||!(a.nodeType>=0))return c.reject(Error("Zanimo transition: no given dom Element!")),c.promise;a.addEventListener(b.transitionend,i,!1);h=setTimeout(function(){c.reject(Error("Zanimo transition: "+a.id+" with "+g+":"+d))},e>j.kMin?e+j.kDelta:j.kMin);setTimeout(function(){var c=g,c=b.prefixProperty(c);a.style[b.properties.property]?(a.style[b.properties.property]=a.style[b.properties.property]+", "+c,a.style[b.properties.duration]=
a.style[b.properties.duration]+", "+e+"ms",a.style[b.properties.timing]=a.style[b.properties.timing]+", "+(f||"linear")):(a.style[b.properties.property]=c,a.style[b.properties.duration]=e+"ms",a.style[b.properties.timing]=f||"linear");a.style[b.norm(c)]=d},0);return c.promise};return j}();
