var Zanimo=function(){if(!window.requestAnimationFrame)window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();var c=function(a){var b="transitionend",e=null,c={transform:"transform"},f=function(a){return(a[0]==="-"?a.substr(1,a.length-1):a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})},g=/(\(.+?\))/g,d=/^0px$/g;_space=
/ /g;_emptyString="";normTransform=function(a){return a.replace(g,function(a){var b=[];a.substr(1,a.length-2).split(",").forEach(function(a){b.push(a.replace(_space,_emptyString).replace(d,"0"))});return"("+b.join(",")+")"})};"WebkitTransition"in a.body.style&&!("OTransition"in a.body.style)&&(b="webkitTransitionEnd",e="webkit");for(var h in c)c[h]=e?"-"+e+"-"+c[h]:c[h];return{transition:f(e?e+"-transition":"transition"),transitionend:b,norm:f,prefixProperty:function(a){return c[a]?c[a]:a},repr:function(a,
b,c){return a+" "+b+"ms "+(c||"linear")},normTransform:normTransform}}(window.document),d=function(a){return Q.fcall(function(){return a})},j=function(a,b,e,d,f){b=c.prefixProperty(b);a.style[c.transition]=a.style[c.transition]?a.style[c.transition]+", "+c.repr(b,d,f):c.repr(b,d,f);a.style[c.norm(b)]=e},k=function(a,b,e,d,f){var b=c.prefixProperty(b),e=a.style[c.transition].split(", "),g=e.lastIndexOf(c.repr(b,d,f)),b=e.filter(function(a,b){return b!==g});a.style[c.transition]=b.toString()};d.transition=
function(a,b,e,d,f){var g=Q.defer(),i,h=function(){i&&(clearTimeout(i),i=null);k(a,b,e,d,f);a.removeEventListener(c.transitionend,h,!1);g.resolve(a)};if(!a||!a.nodeType||!(a.nodeType>=0))return g.reject(Error("Zanimo transition: no DOM element!")),g.promise;a.addEventListener(c.transitionend,h,!1);window.requestAnimationFrame(function(){j(a,b,e,d,f);i=setTimeout(function(){var d=c.normTransform(a.style[c.prefixProperty(b)]),f=c.normTransform(e);d==f?(h(),g.resolve(a)):g.reject(Error("Zanimo transition: "+
a.id+" with "+b+":"+f+" DOM value: ["+d+"]"))},d+20)},a);return g.promise};d.transitionf=function(a,b,c,j){return function(f){return d.transition(f,a,b,c,j)}};d.transform=function(a,b){var d=Q.defer();window.requestAnimationFrame(function(){a.style[c.prefixed.transform]=b;d.resolve(a)},a);return d.promise};d.transformf=function(a){return function(b){return d.transform(b,a)}};d.f=function(a){return function(){return d(a)}};return d}();
