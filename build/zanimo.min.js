var Zanimo=function(){var g=function(a){var c=Q.defer();c.resolve(a);return c.promise};g.kDelta=50;g.delay=function(a,c){var b=Q.defer();setTimeout(function(){b.resolve(c||a)},a);return b.promise};g.transition=function(a,c,b,d,e){var f=Q.defer(),h=-1,i=!1;if(!a||!a.nodeType||!(a.nodeType>=0))return f.resolve(Q.fcall(function(){throw Error("Zanimo transition: no given dom Element!");})),f.promise;var j=function(){i=!0;f.resolve(a);a.removeEventListener(Zanimo.utils.prefix.evt,j,!1)};a.addEventListener(Zanimo.utils.prefix.evt,
j,!1);Zanimo.delay(d+g.kDelta).then(function(){i||f.resolve(Q.fcall(function(){throw Error("Zanimo transition: "+a.id+" with "+c+":"+b);}))});h=Zanimo.utils.addTransition(a,c);Zanimo.utils.setAttributeAt(a,"TransitionDuration",d+"ms",h);Zanimo.utils.setAttributeAt(a,"TransitionTimingFunction",e||"linear",h);Zanimo.utils.setProperty(a,c,b);return f.promise};return g}();
(function(g,a,c){a.prefixed=["transform"];a.prefix={webkit:{evt:"webkitTransitionEnd",name:"webkit",css:"-webkit-"},opera:{evt:"oTransitionEnd",name:"O",css:"-o-"},firefox:{evt:"transitionend",name:"Moz",css:"-moz-"}};a.browser=c.match(/.*(Chrome|Safari).*/)?"webkit":c.match(/.*Firefox.*/)?"firefox":navigator.appName==="Opera"?"opera":"webkit";a.prefix=a.prefix[a.browser];a.transitionProperty=a.prefix.name+"TransitionProperty";a.addTransition=function(b,d,e,f){d=a._prefixCSS(d);e=b.style[a.transitionProperty];
f=(e?e.split(", "):[]).indexOf(d);return f===-1?a._appendToProperty(b,"TransitionProperty",d):f};a.setAttributeAt=function(b,d,e,f){var c=(b.style[a.prefix.name+d]||"").split(",");c[f]=e;b.style[a.prefix.name+d]=c.toString()};a.setProperty=function(b,d,e){b.style[a._prefixAndCapitalize(d)]=e};a._appendToProperty=function(a,d,e){var c=a.style[d]||"";a.style[d]=c.length>0?c+", "+e:e;return a.style[d].split(", ").indexOf(e)};a._prefixCSS=function(b){return a.prefixed.indexOf(b)===-1?b:a.prefix.css+b};
a._prefixAndCapitalize=function(b){b=a._prefixCSS(b);return b.split("-").reduce(function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)})}})(window.Zanimo,window.Zanimo.utils=window.Zanimo.utils||{},navigator.userAgent);
