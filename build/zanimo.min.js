var Zanimo=function(){function i(a,b,d){var c=a.style[b];a.style[b]=c.length>0?c+", "+d:d}var a=function(a){var b=Zanimo.async.defer();b.resolve(a);return b.promise};a.delay=function(a){var b=Zanimo.async.defer();setTimeout(function(){b.resolve(a)},a);return b.promise};a.transition=function(a,b,d,c,e){var f=Zanimo.async.defer(),h=!1,g=function(){h=!0;f.resolve(a);a.removeEventListener("webkitTransitionEnd",g)};a.addEventListener("webkitTransitionEnd",g);Zanimo.delay(c+20).then(function(){h||f.resolve(Zanimo.async.reject("Transition error."))});
i(a,"webkitTransitionDuration",c+"ms");i(a,"webkitTransitionProperty",b);i(a,"webkitTransitionTimingFunction",e||"linear");a.style.cssText+=";"+b+":"+d;return f.promise};return a}();
(function(i,a){a.enqueue=function(a){setTimeout(a,1)};a.isPromise=function(a){return a&&typeof a.then==="function"};a.defer=function(){var b=[],d;return{resolve:function(c){if(b){d=j(c);for(var c=0,e=b.length;c<e;c++)(function(b){a.enqueue(function(){d.then.apply(d,b)})})(b[c]);b=void 0}},promise:{then:function(c,e){var f=a.defer(),c=c||function(a){return a},e=e||function(b){return a.reject(b)},h=function(a){f.resolve(c(a))},g=function(a){f.resolve(e(a))};b?b.push([h,g]):a.enqueue(function(){d.then(h,
g)});return f.promise}}}};var j=function(b){return b&&b.then?b:{then:function(d){var c=a.defer();a.enqueue(function(){c.resolve(d(b))});return c.promise}}};a.reject=function(b){return{then:function(d,c){var e=a.defer();a.enqueue(function(){e.resolve(c(b))});return e.promise}}};i.when=a.when=function(b,d,c){var e=a.defer(),f,d=d||function(a){return a},c=c||function(b){return a.reject(b)},h=function(b){try{return d(b)}catch(c){return a.reject(c)}},g=function(b){try{return c(b)}catch(d){return a.reject(d)}};
a.enqueue(function(){j(b).then(function(a){f||(f=!0,e.resolve(j(a).then(h,g)))},function(a){f||(f=!0,e.resolve(g(a)))})});return e.promise}})(window.Zanimo,window.Zanimo.async=window.Zanimo.async||{});
